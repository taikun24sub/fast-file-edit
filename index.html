<!DOCTYPE html>
<html>
<head>
    <title>Fast File Edit</title>
</head>
<body>
    <input id="input-file" type="file">
    <button onclick='read();'>Read</button><button onclick='fwrite();'>Write</button>
    <p>v1.0.0d</p>
    <textarea id='inp' style='width:100vw;height:90vh;'></textarea>
    <script>
        const inp = document.getElementById('inp');
        const inf = document.getElementById('input-file');

        function read() {
            try {
                const reader = new FileReader();
                reader.onload = () => {
                    inp.value = reader.result;
                };
                reader.readAsText(inf.files[0]);
            } catch (e) {
                inp.value = `Error reading file: ${e.message}`;
            }
        }

        function fwrite() {
            try {
                const blob = new Blob([inp.value], { type: 'text/plain' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = inf.files[0].name;
                a.click();
                URL.revokeObjectURL(url);
            } catch (e) {
                inp.value = `Error writing file: ${e.message}`;
            }
        }
    </script>
</body>
</html>
