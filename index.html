<!DOCTYPE html>
<html>
<head>
    <title>Fast File Edit</title>
</head>
<body>
    <button id="input-file" type="file" onclick='slc();'>
    <button onclick='read();'>Read</button><button onclick='fwrite();'>Write</button>
    <p>v1.1.0a</p>
    <textarea id='inp' style='width:100vw;height:90vh;'></textarea>
    <script>
        const inp = document.getElementById('inp');
        let handler;
        async function slc(){
            handler = await showOpenFilePicker();
        }
        function read() {
            try {
                const reader = new FileReader();
                reader.onload = () => {
                    inp.value = reader.result;
                };
                reader.readAsText(handler.getFile());
            } catch (e) {
                inp.value = `Error reading file: ${e.message}`;
            }
        }

        async function fwrite() {
            try {
                let writableStream = await handler.createWritable()
                await writableStream.write(inp.value)
                await writableStream.close()
            } catch (e) {
                inp.value = `Error writing file: ${e.message}`;
            }
        }
    </script>
</body>
</html>
